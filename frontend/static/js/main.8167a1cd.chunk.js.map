{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObj","post","id","put","delete","Notification","notification","Message","text","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","Error","Search","search","handler","value","onChange","Phonebook","persons","updatePerson","createPerson","useState","newName","setNewName","newNumber","setNewNumber","event","target","type","onClick","preventDefault","currentPerson","find","p","pname","name","toLowerCase","msg","window","confirm","newPerson","number","Numbers","filteredPersons","deletePerson","console","log","undefined","Object","entries","map","key","person","NumberRow","App","setPersons","setSearch","setNotification","useEffect","service","res","filter","sname","includes","showNotification","compoment","setTimeout","curPerson","catch","error","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8167a1cd.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => { \n    return axios.get(baseUrl)\n        .then(response => response.data)\n}\n\nconst create = newObj => { \n    return axios.post(baseUrl, newObj)\n        .then(response => response.data)\n}\n\nconst update = (id, newObj) => { \n    return axios.put(`${baseUrl}/${id}`, newObj)\n        .then(response => response.data)\n}\n\nconst del = (id) => { \n    return axios.delete(`${baseUrl}/${id}`)\n        .then(response => response.data)\n}\n\nexport default { getAll, create, update, del }\n","import React, { useState, useEffect } from 'react'\nimport service from './services/persons'\n\nconst Notification = ({notification}) => {\n    return notification === null ? null :\n        (\n            <div>\n                {notification} \n            </div>\n        )\n}\n\nconst Message = ({text}) => {\n    const style = {\n        color: 'green',\n        background: 'lightgrey',\n        fontSize: '20px',\n        borderStyle: 'solid',\n        borderRadius: '5px',\n        padding: '10px',\n        marginBottom: '10px'\n    } \n\n    return (\n        <div style={style}>\n            {text} \n        </div>\n    )\n}\n\nconst Error = ({text}) => {\n    const style = {\n        color: 'red',\n        background: 'lightgrey',\n        fontSize: '20px',\n        borderStyle: 'solid',\n        borderRadius: '5px',\n        padding: '10px',\n        marginBottom: '10px'\n    } \n\n    return (\n        <div style={style}>\n            {text} \n        </div>\n    )\n}\n\nconst Search = ({search, handler}) => {\n    return (\n        <div>\n            <input value={search} onChange={handler}/>\n        </div>\n    )\n}\n\nconst Phonebook = ({persons, updatePerson, createPerson}) => { \n    const [ newName, setNewName ] = useState('')\n    const [ newNumber, setNewNumber ] = useState('')\n\n    const handleNewNameChange = (event) => setNewName(event.target.value)\n    const handleNewNumberChange = (event) => setNewNumber(event.target.value)\n\n    const addPerson = (event) => {\n        event.preventDefault()\n\n        const comparator = p => {\n            const pname = p.name.toLowerCase()\n            const sname = newName.toLowerCase()\n            return sname === pname\n\n        }\n        const currentPerson = persons.find(comparator)\n        const msg = `${newName} is already in the phonebook. Do you want to update?`\n\n        if (currentPerson) {\n            if (window.confirm(msg)) {\n                const newPerson = { ...currentPerson , number: newNumber }\n                updatePerson(currentPerson, newPerson)\n            }\n        }else{\n            const newPerson = {name:newName, number: newNumber}\n            createPerson(newPerson)\n            setNewName('')\n            setNewNumber('')\n        }\n    }\n\n    return (\n        <>\n            <form>\n                <div>\n                    name: <input value={newName} onChange={handleNewNameChange}/>\n                    <br/>\n                    number: <input value={newNumber} onChange={handleNewNumberChange}/>\n                </div>\n                <div>\n                    <button type=\"submit\" onClick={addPerson}>add</button>\n                </div>\n            </form>\n        </>\n    )\n}\n\nconst Numbers = ({filteredPersons, deletePerson}) => { \n    console.log('rendering Numbers',filteredPersons)\n    if (filteredPersons === undefined || Object.entries(filteredPersons) === 0)\n        return <div> <p> No persons in db </p> </div>\n\n            return (\n                <div>\n                    <ul> \n                        { filteredPersons.map( p => <NumberRow key={p.name} person={p} deletePerson= {deletePerson} /> ) } \n                    </ul>\n                </div>\n            ) \n}\n\nconst NumberRow = ({person, deletePerson}) => {\n    const deleteHandler = () => {\n        window.confirm(`delete ${person.name} ?`) && deletePerson(person)\n    }\n    return (\n        <div>\n            <li> {person.name} {person.number} <button onClick={deleteHandler} > delete </button></li>\n        </div>\n    )\n}\n\nconst App = () => {\n    console.log('rendering App')\n    const [ persons, setPersons ] = useState([])\n    const [ search, setSearch ] = useState('')\n    const handleSearchChange = (event) => setSearch(event.target.value)\n    const [notification, setNotification] = useState(null)\n\n    const fetchHook = () => { \n        service\n            .getAll()\n            .then(res => setPersons(res))\n        console.log('fetchHook', persons)\n    }\n    useEffect(fetchHook, [])\n\n\n    const filteredPersons = (() => {\n        const comparator = p => { \n            const pname = p.name.toLowerCase()\n            const sname = search.toLowerCase()\n            return pname.includes(sname)\n        }\n\n\n        return search === \"\" \n            ? persons \n            : persons.filter(comparator)     \n    })()\n\n    const showNotification = (compoment) => {\n        setNotification(compoment)\n        setTimeout( () => { \n            setNotification(null)\n        }, 5000)\n    }\n\n    const deletePerson = (curPerson) => {\n        service.del(curPerson.id)\n            .then( () => {\n                setPersons(persons.filter( p => p.id !== curPerson.id ))\n                const msg = `${curPerson.name} deleted`\n                showNotification(<Message text={msg} />)\n            }).catch( error => {\n                showNotification(<Error text={error.response.data.error} />)\n            })\n    }\n\n    const updatePerson = (curPerson, newPerson) => {\n        service.update(curPerson.id, newPerson)\n            .then( res => {\n                setPersons(persons.map( person => \n                    person.id === curPerson.id ? res : person\n                ))\n                const msg = `${curPerson.name} updated`\n                showNotification(<Message text={msg} />)\n            }).catch( error => {\n                showNotification(<Error text={error.response.data.error} />)\n            })\n    }\n\n    const createPerson = (newPerson) => {\n        service.create(newPerson)\n            .then(res => {\n                setPersons(persons.concat(res)) \n                const msg = `${newPerson.name} added`\n                showNotification(<Message text={msg} />)\n            }).catch( error => {\n                console.log(\"frontend error: \", error)\n                debugger\n                showNotification(<Error text={error.response.data.error} />)\n            })\n    }\n\n    return (\n        <div>\n            <Notification notification= {notification} />\n            <h2>Search</h2>\n            <Search search={search} handler={handleSearchChange} />\n\n            <h2>Phonebook</h2>\n            <Phonebook persons={persons} updatePerson={updatePerson} createPerson={createPerson} />\n\n            <h2>Numbers</h2>\n            <Numbers filteredPersons={filteredPersons} deletePerson={deletePerson} />\n        </div>\n    )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}